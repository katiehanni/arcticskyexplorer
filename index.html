<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arctic Sky Explorer | Seasonal Dynamics Explorer</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root {
            color-scheme: light;
            --bg: #f5f8fb;
            --panel: #ffffff;
            --accent: #0f8cc6;
            --accent-dark: #0b3c5d;
            --muted: #7a8ca0;
            --text: #1f2a37;
            --shadow: 0 18px 40px rgba(15, 140, 198, 0.12);
            --border: #dbe4f0;
            --radius: 14px;
        }
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        main {
            max-width: 1460px;
            margin: 0 auto;
            padding: 32px 24px 96px;
        }
        header { display: grid; gap: 18px; margin-bottom: 28px; }
        header h1{
            margin: 0;
            font-size: clamp(2.2rem, 4vw, 3rem);
            font-weight: 700;
            color: var(--accent-dark);
        }
        header p {
            margin: 0;
            max-width: 760px;
            font-size: 1.05rem;
            color: var(--muted);
        }
        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin-bottom: 28px;
        }
        .meta-card {
            background: var(--panel);
            border-radius: var(--radius);
            padding: 18px 20px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
        }
        .meta-card h3 {
            margin: 0 0 6px;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--accent-dark);
        }
        .meta-card p {
            margin: 0;
            font-size: 0.95rem;
        }
        .controls{
            background: var(--panel);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 22px 26px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 24px;
        }
        .filter-group{ display:flex; flex-direction:column; gap:10px; }
        .filter-group label{
            font-size:0.88rem;
            font-weight:600;
            color:var(--accent-dark);
        }
        select{
            appearance:none;
            border:1px solid var(--border);
            border-radius:999px;
            padding:10px 18px;
            font-size:0.95rem;
            font-weight:500;
            background:#eef4f8;
            color:var(--accent-dark);
        }
        button{
            appearance: none;
            border: none;
            border-radius: 999px;
            padding: 10px 18px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }
        button:hover{ transform:translateY(-1px); }
        button:active{ transform:translateY(0); }
        .toggle-button{
            background:#eef4f8;
            color:var(--accent-dark);
            border:1px solid transparent;
        }
        .toggle-button.active{
            background:var(--accent-dark);
            color:#fff;
            box-shadow:0 10px 20px rgba(11, 60, 93, 0.25);
        }
        .site-toggle{
            display:flex;
            align-items:center;
            gap:8px;
            padding:8px 14px;
            border-radius:999px;
            background:#eef4f8;
            color:var(--accent-dark);
            font-size:0.85rem;
            border:1px solid transparent;
        }
        .site-toggle.active{
            background:var(--accent);
            color:#fff;
            box-shadow:0 6px 14px rgba(15,140,198,0.25);
        }
        .site-toggle span{
            width:10px;
            height:10px;
            border-radius:50%;
            background:currentColor;
        }
        .season-group, .site-group{
            display:flex;
            flex-wrap:wrap;
            gap:10px;
        }
        .viz-card{
            background: var(--panel);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 22px 24px 26px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .viz-header{ display:grid; gap:6px; }
        .viz-title{ margin:0; font-size:1.2rem; font-weight:600; color:var(--accent-dark); }
        .viz-subtitle{ margin:0; font-size:0.9rem; color:var(--muted); }
        svg{
            width: 100%;
            height: auto;
        }
        .legend-container{
            display:flex;
            flex-wrap:wrap;
            gap:14px;
            font-size:0.85rem;
            color:var(--muted);
        }
        .legend-item{
            display:flex;
            align-items:center;
            gap:8px;
            padding:6px 10px;
            border-radius:12px;
            background:#f0f6fa;
            border:1px solid rgba(15,140,198,0.12);
        }
        .legend-dot{
            width:12px;
            height:12px;
            border-radius:50%;
        }
        .viz-summary{
            font-size:0.9rem;
            color:var(--muted);
            line-height:1.5;
        }
        .writeup{
            margin-top:40px;
            background: var(--panel);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 26px 28px;
            display: grid;
            gap: 18px;
        }
        .writeup h2{ margin:0; font-size:1.35rem; color:var(--accent-dark); }
        .writeup h3{ margin:16px 0 8px; font-size:0.95rem; letter-spacing:0.05em; color:var(--accent-dark); text-transform:uppercase; }
        .writeup p{ margin:0; color:var(--muted); font-size:0.95rem; }
        .writeup ul{ margin:0; padding-left:20px; color:var(--muted); font-size:0.95rem; }
        a{ color:var(--accent); font-weight:600; text-decoration:none; }
        a:hover{ text-decoration:underline; }
        @media(max-width:820px){
            select{ width:100%; }
        }
    </style>
</head>
<body>
    <main>
        <header>
            <h1>Arctic Sky Explorer</h1>
            <p>Explore how daylight hours and surface brightness evolve for five Arctic monitoring stations. Use the filters to focus on a season, toggle specific sites, and swap metrics within a single integrated view.</p>
        </header>

        <section class="meta-grid">
            <article class="meta-card">
                <h3>Team</h3>
                    <p><strong>Amrutha Potluri</strong> (apotluri@ucsd.edu)</p>
                    <p><strong>Audrey Chung</strong> (auchung@ucsd.edu)</p>
                    <p><strong>Faline Le</strong> (fnle@ucsd.edu)</p>
                    <p><strong>Katie Hannigan</strong> (khannigan@ucsd.edu)</p>
            </article>
            <article class="meta-card">
                <h3>Dataset</h3>
                <p>NASA MODIS Terra MOD09GA &amp; MOD10A1 (GIBS access, 2023 Arctic subset)</p>
            </article>
            <article class="meta-card">
                <h3>Question</h3>
                <p>How do seasonal shifts in daylight and surface brightness relate across the Arctic basin?</p>
            </article>
            <article class="meta-card">
                <h3>Exploratory Work</h3>
                <p><a href="exploratory/exploratory.html">View exploratory sketches</a></p>
            </article>
        </section>

        <section class="controls">
            <div class="filter-group">
                <label for="metric-select">Metric</label>
                <select id="metric-select">
                    <option value="brightnessIndex">Surface brightness index</option>
                    <option value="daylightHours">Daylight hours</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Season filter</label>
                <div class="season-group" id="season-filter"></div>
            </div>
            <div class="filter-group">
                <label>Site focus</label>
                <div class="site-group" id="site-filter"></div>
                <button id="reset-filters" class="toggle-button" style="width:max-content;">Reset filters</button>
            </div>
        </section>

        <article class="viz-card">
            <div class="viz-header">
                <h2 class="viz-title">Seasonal Dynamics &middot; Single View</h2>
                <p class="viz-subtitle">Lines track the selected metric across the months for each active station. Hover for detailed values and compare how seasonal shifts differ between sites.</p>
            </div>
            <div id="viz-root"></div>
            <div class="legend-container" id="legend"></div>
            <p class="viz-summary" id="viz-summary"></p>
        </article>

        <section class="writeup" id="writeup">
            <h2>Design &amp; Process Notes</h2>
        
            <div>
                <h3>Design Rationale</h3>
                <p>
                    Our visualization goal was to make seasonal dynamics in the Arctic both comparable and continuous. 
                    Because our data involved monthly values for the two linked metrics, surface brightness index
                    and daylight hours, across five distinct sites, we needed a layout that emphasized temporal flow 
                    while preserving regional contrast. Thus, we chose a <strong>multi-line chart</strong> with a shared 
                    time axis. For instance, a single horizontal axis allows users to intuitively follow the seasonal 
                    arc from January through December, reinforcing the cyclical nature of Arctic light and surface changes.
                    Overlaying all sites in one coordinate system makes it easy to identify synchronized trends and 
                    discrepancies between regions.
                </p>
            </div>
            <div>
                <p>
                    <strong>Encoding choices:</strong>
                </p>
                <ul>
                    <li><strong>X-axis:</strong> We show monthly averages in order, which helps viewers easily perceive 
                        seasonal patterns without being distracted by day-to-day fluctuations.</li>
                    <li><strong>Y-axis:</strong> We display the values of the selected metric averaged by month, allowing 
                        viewers to compare seasonal trends accurately and interpret the relative magnitude of changes without 
                        scale distortion, reducing potential misreading across metrics.</li>
                    <li><strong>Line color:</strong> We assign each site a distinct, colorblind-safe color, making it easy 
                        for viewers to track each location's monthly trends across the year even if the lines overlap.</li>
                    <li><strong>Line weight &amp; smoothing:</strong> We use moderate line thickness and subtle smoothing of 
                        monthly averages to highlight overall seasonal rhythms, guiding viewers along clear trends without 
                        clutter from day-to-day fluctuations.</li>
                </ul>
            </div>
            <div>
                <p>
                    We considered alternatives such as small multiples or dual-axis plots but found them less effective. 
                    Small multiples fragmented comparisons, making it harder for the viewer to perceive synchronicity across sites, 
                    while dual axes risked misinterpretation due to differing scales. Essentially, the single multi-line chart 
                    combined with the metric toggle provides the clearest and most flexible approach, allowing viewers to perceive 
                    both temporal patterns and site-to-site differences in a unified view. Additionally, with limited screen space, 
                    a combined plot avoids fragmentation that could overwhelm or confuse viewers.
                </p>
            </div>
        
            <div>
                <h3>Interaction Techniques</h3>
                <p>
                    In order to help viewers explore seasonal and site-specific trends effectively, we implemented several interactive controls. 
                    Essentially, these interactions allow users to switch between metrics, focus on particular seasons, and select specific 
                    monitoring stations. Each control was designed to balance flexibility with clarity, enabling viewers to easily investigate patterns 
                    without overwhelming the visualization.
                </p>
                <ul>
                    <li><strong>Metric toggle:</strong> We include a metric toggle that rebinds the y-axis and legend between surface 
                        brightness and daylight hours.</li>
                    <li><strong>Season toggle:</strong>We provide season toggles that remap the horizontal axis to focus on either the 
                        year trend, or to focus on the different seasons, allowing viewers to quickly compare seasonal patterns.</li>
                    <li><strong>Site toggle:</strong>We implement site toggles so viewers can select specific stations for comparison; 
                        the legend and narrative text update dynamically to reflect active sites.</li>
                    <li><strong>Tooltips:</strong>We enable hover tooltips that show details-on-demand for site, month, and exact metric 
                        values, helping viewers interpret the data without cluttering the chart.</li>
                    <li><strong>Reset filters:</strong>We provide a reset button that restores the full-year view with a single click, 
                        making it easy to start fresh.</li>
                    <li><strong>Annotations:</strong> We included dynamic textual annotations that update with the toggles beneath 
                        the chart, providing viewers with context so they can interpret trends quickly without scanning each line manually.</li>
                </ul>
                <p> We considered several ways to implement interactivity to help viewers explore the data. Alternatively, for the metric 
                    toggle, we thought about displaying both daylight and surface brightness on a dual-axis plot, but this risked confusing
                    viewers with differing scales. Alternatively, instead of individual site toggles, we could have used a dropdown menu to 
                    select one site at a time. However, this choice would have limited the ability to compare multiple stations simultaneously.
                    Seasonal focus could have been handled with sliders instead of buttons, but buttons provided a clearer and faster way 
                    to switch between seasons. Ultimately, we chose toggles for sites, seasons, and metrics, along with hover tooltips, 
                    reset filters, and dynamic annotations because these interactions allow viewers to explore multiple dimensions 
                    efficiently, to compare trends across sites and seasons, and to received detailed information on demand without overwhelming 
                    the visualization.
                </p>
            </div>
        
            <div>
                <h3>Data Processing</h3>
                <p>
                    We sourced NASA MODIS Terra data (MOD09GA and MOD10A1 products) for the Arctic via NASA GIBS and transformed it 
                    to highlight seasonal patterns across five monitoring sites. Daily measurements were aggregated into monthly averages to 
                    reduce noise and make trends in surface brightness and daylight hours more interpretable. Furthermore, surface 
                    brightness was derived from reflectance values, while daylight hours were calculated using astronomical formulas based on 
                    latitude. The data was cleaned, structured, and exported into a tidy CSV format suitable for D3 visualization.
                    These transformations ensure that viewers can easily perceive seasonal dynamics without being distracted by daily variability. 
                    Challenges included maintaining temporal and spatial consistency and accounting for cloud coverage variations in the satellite imagery.
                </p>
            </div>
        
            <div>
                <h3>Team Development Process</h3>
                <p>
                    We split the work among team members based on individual strengths to maximize efficiency and clarity where everyone contributed 
                    to reviewing the datasets and collectively selecting the focus for the project. This workflow allowed the team to balance responsibilities 
                    effectively while maintaining collaborative input at every stage. We found that frequent check-ins and collaborative coding sessions were 
                    essential for troubleshooting complex interactions and ensuring a polished final product.
                </p>
                <div>
                <ul>
                    <li><strong>Amrutha:</strong> Worked on exploratory graphs, initial data wrangling, and collaboratively implemented the final D3 
                        visualization and interactive filters
                    <li><strong>Audrey:</strong> Focused on prototyping the webpage, designing the interactive elements, and writing the design rationale and 
                        write-up
                    <li><strong>Faline:</strong> Brainstormed potential research questions, contributed to exploratory graphs, and collaboratively
                        implemented the final D3 visualization and interactive filters
                    <li><strong>Katie:</strong> Led the checkpoint submission, set up the GitHub Pages sit, created the checkpoint vide, and collaboratively
                        implemented the final D3 visualization and interactive filters
                </ul>
                </div>
                <p>
                    Ultimately, the total effort for the project was approximately 18 people-hours where the most time-intensive aspects were setting up 
                    and debugging filters for seasonal and site selection, performing data wrangling, and ensuring that all interactions were seamless and responsive.
                </p>
            </div>
        </section>
    </main>
    <script src="js/app.js"></script>
</body>
</html>
